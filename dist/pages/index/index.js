!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){t.exports=n.p+"pages/index/index.wxml"},function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};e.__esModule=!0;var a=n(15),i=(n(14),n(0),n(16),{api_key:"g59sAr8tmZBK4LgGBLtpY_3VRYPldTqu",api_secret:"sQOhT09otoRZLVRol7QZ0nG_QMNbYUTS"}),r=function(){function t(){this.clickNum=0,this.data={descAnimation:wx.createAnimation({}),ifAnimated:"",imageSrc:"",selfAnimation:wx.createAnimation({}),showPopup:!1,starAnimation:wx.createAnimation({}),starInfo:{conCoppy:"",confidence:0,name:"",url:""}},this.detected=!1}return t.prototype.onShareAppMessage=function(){return{title:"æŸ¥æ‰¾å’Œä½ æœ€åƒçš„æ˜Žæ˜Ÿ"}},t.prototype.onReady=function(){this.showSelfImg(0)},t.prototype.onChooseImg=function(t){var e=this;wx.chooseImage({count:1,sizeType:["compressed"],success:function(t){console.log(t);var n=t.tempFilePaths;e.setData({imageSrc:n[0]})}}),this.showSelfImg(),this.detected=!1},t.prototype.previewImgs=function(t){var e=[this.data.imageSrc,this.data.starInfo.url],n={selfImg:e[0],starImg:e[1]};wx.previewImage({current:n[t.currentTarget.dataset.origin],urls:e})},t.prototype.onAbout=function(){this.setData({showPopup:!0})},t.prototype.hidePopup=function(){this.setData({showPopup:!1})},t.prototype.coppyToClipBoard=function(t){console.log(t);var e=t.currentTarget.dataset.coppyText;wx.setClipboardData({data:e,success:function(){wx.showToast({title:"å·²å¤åˆ¶"})}})},t.prototype.clickAvatar=function(){this.clickNum>=2?this.animateAvatar():this.clickNum=this.clickNum+1},t.prototype.compareStart=function(t){var e=this;if(!this.detected&&this.data.imageSrc){wx.showLoading({mask:!0,title:"æ£€æµ‹ä¸­..."});var n=this.data.imageSrc;this.searchFromFacePlusPlus(n).then(function(t){var n;try{n=JSON.parse(t.data).results[0],e.setStarInfo(n,function(){wx.hideLoading(),e.showStarImg(),e.detected=!0})}catch(t){console.log("error",t),e.handleDetectErr(),n={}}console.log("info",n)}).catch(function(t){e.handleDetectErr()})}else wx.showModal({content:"è¯·å…ˆé€‰æ‹©ä¸€å¼ å›¾ç‰‡",title:"æ¸©é¦¨æç¤º:"})},t.prototype.animateAvatar=function(){this.setData({ifAnimated:"avatar-animate"})},t.prototype.handleDetectErr=function(){wx.showModal({confirmText:"OKAYðŸ‘Œ",content:"è¯†åˆ«ä¸äº†å‘€ï¼Œå¯èƒ½æ˜¯å› ä¸ºå¤´åƒå¤ªæŠ½è±¡ï¼Œæ¢ä¸ªè¯•è¯•ï¼Ÿ",showCancel:!1,title:"æ¸©é¦¨æç¤º:"}),wx.hideLoading()},t.prototype.setStarInfo=function(t,e){this.setData({starInfo:o({},t,{conCoppy:a.confidenceCoppy(t.confidence),name:t.user_id.split("::")[0],url:t.user_id.split("::")[1]})},function(){"function"==typeof e&&e()})},t.prototype.searchFromFacePlusPlus=function(t){return new Promise(function(e,n){wx.uploadFile({filePath:t,formData:o({},i,{faceset_token:"482fbdc115f2cc238f814def5e05c7bb"}),name:"image_file",success:function(t){200===t.statusCode?e(t):n(t)},url:"https://api-cn.faceplusplus.com/facepp/v3/search"})})},t.prototype.showSelfImg=function(t){void 0===t&&(t=300);var e=wx.createAnimation({}),n=wx.createAnimation({}),o=wx.createAnimation({});e.width("80%").rotateY(0).step({duration:t}),n.opacity(0).scale(0).width(0).rotateY(0).step({duration:t}),o.opacity(0).rotate(0).scale(1).step({duration:t}),this.setData({descAnimation:o.export(),selfAnimation:e.export(),starAnimation:n.export()}),this.setData({showAD:!1})},t.prototype.showStarImg=function(){var t=wx.createAnimation({}),e=wx.createAnimation({}),n=wx.createAnimation({});t.width("30%").rotateY(15).step({duration:300}),e.opacity(1).scale(1).width("70%").rotateY(-15).step({duration:300}),n.opacity(.8).rotate(-15).scale(1.5).step({duration:300}),this.setData({descAnimation:n.export(),selfAnimation:t.export(),starAnimation:e.export()}),this.setData({showAD:!0})},t}();Page(new r)},,,,,,,,,,,,,function(t,e){},function(t,e,n){"use strict";e.__esModule=!0,e.getAppData=function(){return getApp().data},e.confidenceCoppy=function(t){var e={stage1:{title:"é¢..",range:[0,30]},stage2:{title:"ä¸é”™å“Ÿï¼Œ",range:[30,50]},stage3:{title:"åŽ‰å®³ï¼",range:[50,60]},stage4:{title:"çŠ€åˆ©ï¼",range:[60,70]},stage5:{title:"Holy awesomeï¼ï¼",range:[70,80]},stage6:{title:"æ˜¯taæœ¬äººï¼Ÿ",range:[80,90]},stage7:{title:"å˜¿å˜¿ï¼Œå°±æ˜¯æ­¤äººï¼",range:[90,100]}};for(var n in e)if(t>=e[n].range[0]&&t<e[n].range[1])return e[n].title;return"å˜¿å˜¿"},e.reverseList=function(t){var e=function(t,n){return n.length?e(t.concat(n[n.length-1]),n.slice(0,-1)):t};return e([],t)}},function(t,e,n){t.exports=n.p+"pages/index/index.json"}]);